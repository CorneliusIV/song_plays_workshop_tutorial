TODO Putting it all together.  